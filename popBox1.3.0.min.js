(function(e){e.fn.popBox=function(t){var n={height:100,width:300,newlineString:"<br/>"};var t=e.extend(n,t);return this.each(function(){obj=e(this);var n="popBoxInput"+obj.attr("Id");var r=e("label[for="+obj.attr("id")+"]").text();obj.after('<div class="popBox-holder"></div><div class="popBox-container"><label style="display: none;" for="'+n+'">'+r+'</label> <textarea id="'+n+'" name="'+n+'" class="popBox-input" /><div class="done-button"><input type="button" value="Enregistrer" class="button blue small"/></div></div>');obj.click(function(){e(this).next(".popBox-holder").show();var n=e(this).next().next(".popBox-container");var r=true;n.children(".popBox-input").css({height:t.height,width:t.width});n.show();var i=e(window).height();var s=e(window).width();var o=n.height();var u=n.width();var a=s/2-u/2;var f=i/2-o/2;n.css({position:"fixed",margin:0,top:(f>0?f:0)+"px",left:(a>0?a:0)+"px"});n.children(".popBox-input").val(e(this).val().replace(RegExp(t.newlineString,"g"),"\n"));n.children(".popBox-input").focus();n.children().keydown(function(t){if(t==null){keycode=event.keyCode}else{keycode=t.which}if(keycode==27){e(this).parent().hide();e(this).parent().prev().hide();r=false}});n.children().blur(function(){if(r){e(this).parent().hide();e(this).parent().prev().hide();e(this).parent().parent().find("input").val(e(this).val().replace(/\n/g,t.newlineString))}})})})}})(jQuery)
